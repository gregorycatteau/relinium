# Relinium Experimental Lab Manifest
# Squelette de manifeste listant les composants existants (pocs/) et les stacks planifiées.
# Ce fichier est volontairement déclaratif et évolutif; il sert de source unique pour l’inventaire du Lab.

version: 0.1.0
updatedAt: "{{TODO: set on commit}}"

philosophy:
  docsFirst: true
  triptych:
    - POC.md
    - RESULTS.md
    - SECURITY.md
  principles:
    - "Humain d’abord, technique comme prolongement"
    - "Traçabilité par la documentation"
    - "Exécution locale, reproductible, sobre"

compatibility:
  symlinksAtRoot:
    enabled: true
    targets:
      - pocs -> lab/pocs
      - scripts -> lab/scripts
      - seeds -> lab/seeds
  notes: "Des liens symboliques à la racine peuvent préserver la compatibilité des chemins historiques (ex: Makefile POC=pocs/...)."

components:
  - family: framework
    items:
      - name: axum
        path: pocs/framework/axum
        status: existing
      - name: django
        path: pocs/framework/django
        status: existing
      - name: fastapi
        path: pocs/framework/fastapi
        status: existing
      - name: gin
        path: pocs/framework/gin
        status: existing

  - family: database
    items:
      - name: postgresql
        path: pocs/database/postgresql
        status: existing
      - name: mariadb
        path: pocs/database/mariadb
        status: existing
      - name: mongodb
        path: pocs/database/mongodb
        status: existing
      - name: sqlite
        path: pocs/database/sqlite
        status: existing

  - family: proxy
    items:
      - name: caddy
        path: pocs/proxy/caddy
        status: existing
      - name: nginx
        path: pocs/proxy/nginx
        status: existing
      - name: traefik
        path: pocs/proxy/traefik
        status: existing

  - family: storage
    items:
      - name: fs-local
        path: pocs/storage/fs-local
        status: existing
      - name: minio
        path: pocs/storage/minio
        status: existing

  - family: runtime
    items:
      - name: go
        path: pocs/runtime/go
        status: existing
      - name: python
        path: pocs/runtime/python
        status: existing
      - name: rust
        path: pocs/runtime/rust
        status: existing

  - family: observability
    items:
      - name: logs-basic
        path: pocs/observability/logs-basic
        status: existing
      - name: prometheus-grafana
        path: pocs/observability/prometheus-grafana
        status: existing

  - family: container
    items:
      - name: docker-compose
        path: pocs/container/docker-compose
        status: existing
      - name: podman
        path: pocs/container/podman
        status: existing

  - family: auth
    items:
      - name: authelia
        path: pocs/auth/authelia
        status: existing
      - name: keycloak
        path: pocs/auth/keycloak
        status: existing
      - name: internal
        path: pocs/auth/internal
        status: existing

commonAssets:
  - name: pocs-common
    path: pocs/common
    usage: "Utilitaires/échantillons pour POCs unitaires"
  - name: lab-seeds
    path: lab/seeds
    usage: "Seeds de données transverses (à créer/déplacer le cas échéant)"
  - name: lab-scripts
    path: lab/scripts
    usage: "Scripts utilitaires transverses au Lab (bench/checks/templates)"

stacks:
  planned:
    - name: django-postgresql-caddy
      description: "Stack web Python avec reverse proxy et DB relationnelle"
      components:
        framework: django
        database: postgresql
        proxy: caddy
        observability: null
        storage: null
      status: planned
      location: lab/stacks/django-postgresql-caddy
      docs:
        triptych: true

    - name: fastapi-postgresql-traefik
      description: "Stack FastAPI avec Traefik et PostgreSQL"
      components:
        framework: fastapi
        database: postgresql
        proxy: traefik
        observability: null
        storage: null
      status: planned
      location: lab/stacks/fastapi-postgresql-traefik
      docs:
        triptych: true

    - name: axum-postgresql-nginx
      description: "Stack Rust (Axum) avec NGINX et PostgreSQL"
      components:
        framework: axum
        database: postgresql
        proxy: nginx
        observability: prometheus-grafana
        storage: fs-local
      status: idea
      location: lab/stacks/axum-postgresql-nginx
      docs:
        triptych: true

conventions:
  pocTriptych: { required: true }
  stackTriptych: { required: true }
  execution:
    localFirst: true
    makeTargets:
      - dev
      - test
      - bench
      - stop
  reporting:
    metrics:
      - latency_p95
      - cpu
      - ram
      - logs_size
    verdict:
      - PASS
      - WARN
      - KO
